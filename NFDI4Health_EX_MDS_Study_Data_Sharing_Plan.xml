<?xml version="1.0" encoding="UTF-8"?>
<StructureDefinition xmlns="http://hl7.org/fhir">
    <id value="nfdi4health-ex-mds-study-data-sharing-plan"/>
    <url value="https://www.nfdi4health.de/fhir/metadataschema/StructureDefinition/nfdi4health-ex-mds-study-data-sharing-plan"/>
    <version value="0.9"/>
    <name value="NFDI4Health_EX_MDS_Study_Data_Sharing_Plan"/>
    <title value="NFDI4Health EX MDS Study Data Sharing Plan"/>
    <status value="draft"/>
    <publisher value="NFDI4Health"/>
    <contact>
        <telecom>
            <system value="url"/>
            <value value="https://www.nfdi4health.de"/>
        </telecom>
    </contact>
    <description value="Extension  providing information about the data sharing strategy of the study."/>
    <fhirVersion value="4.0.1"/>
    <mapping>
        <identity value="rim"/>
        <uri value="http://hl7.org/v3"/>
        <name value="RIM Mapping"/>
    </mapping>
    <mapping>
        <identity value="NFDI4Health"/>
        <name value="NFDI4Health to FHIR Mapping"/>
    </mapping>
    <kind value="complex-type"/>
    <abstract value="false"/>
    <context>
        <type value="element"/>
        <expression value="ResearchStudy"/>
    </context>
    <type value="Extension"/>
    <baseDefinition value="http://hl7.org/fhir/StructureDefinition/Extension"/>
    <derivation value="constraint"/>
    <differential>
        <element id="Extension">
            <path value="Extension"/>
            <short value="Information about data sharing"/>
            <definition value="Group of items providing information about the data sharing strategy of the study."/>
            <min value="1"/>
            <max value="1"/>
            <mapping>
                <identity value="NFDI4Health"/>
                <map value="1.17.35 Resource.studyDesign.dataSharingPlan"/>
            </mapping>
        </element>
        <element id="Extension.extension">
            <path value="Extension.extension"/>
            <min value="1"/>
        </element>
        <element id="Extension.extension:generally">
            <path value="Extension.extension"/>
            <sliceName value="generally"/>
            <short value="Is it planned to share the data?"/>
            <definition value="Indication whether there is a plan to make data collected in the study available. In case of studies with patients or other individuals, this refers to individual participant data (IPD)."/>
            <comment value="Select one value from the list."/>
            <min value="1"/>
            <max value="1"/>
            <mapping>
                <identity value="NFDI4Health"/>
                <map value="1.17.35.1 Resource.studyDesign.dataSharingPlan.generally"/>
            </mapping>
        </element>
        <element id="Extension.extension:generally.extension">
            <path value="Extension.extension.extension"/>
            <max value="0"/>
        </element>
        <element id="Extension.extension:generally.url">
            <path value="Extension.extension.url"/>
            <fixedUri value="generally"/>
        </element>
        <element id="Extension.extension:generally.value[x]">
            <path value="Extension.extension.value[x]"/>
            <min value="1"/>
            <type>
                <code value="Coding"/>
            </type>
            <binding>
                <strength value="required"/>
                <description value="Value set used to respond to questions that can be answered Yes, No, or Undecided"/>
                <valueSet value="https://www.nfdi4health.de/fhir/metadataschema/ValueSet/nfdi4health-vs-mds-yes-no-undecided-snomedct-nci"/>
            </binding>
        </element>
        <element id="Extension.extension:generally.value[x].system">
            <path value="Extension.extension.value[x].system"/>
            <min value="1"/>
        </element>
        <element id="Extension.extension:generally.value[x].code">
            <path value="Extension.extension.value[x].code"/>
            <min value="1"/>
        </element>
        <element id="Extension.extension:supportingInformation">
            <path value="Extension.extension"/>
            <sliceName value="supportingInformation"/>
            <short value="Supporting documents available in addition to the data"/>
            <definition value="Supporting information/documents which will be made available in addition to the study data."/>
            <comment value="Select all that apply."/>
            <min value="0"/>
            <max value="*"/>
            <mapping>
                <identity value="NFDI4Health"/>
                <map value="1.17.35.2 Resource.studyDesign.dataSharingPlan.supportingInformation"/>
            </mapping>
        </element>
        <element id="Extension.extension:supportingInformation.extension">
            <path value="Extension.extension.extension"/>
            <max value="0"/>
        </element>
        <element id="Extension.extension:supportingInformation.url">
            <path value="Extension.extension.url"/>
            <fixedUri value="supportingInformation"/>
        </element>
        <element id="Extension.extension:supportingInformation.value[x]">
            <path value="Extension.extension.value[x]"/>
            <min value="1"/>
            <type>
                <code value="Coding"/>
            </type>
            <binding>
                <strength value="required"/>
                <description value="Value set defining codes to specify if the DataSHIELD/Opal infrastructure is available."/>
                <valueSet value="https://www.nfdi4health.de/fhir/metadataschema/ValueSet/nfdi4health-vs-mds-study-data-sharing-plan-sup-inf-umls-local"/>
            </binding>
        </element>
        <element id="Extension.extension:supportingInformation.value[x].system">
            <path value="Extension.extension.value[x].system"/>
            <min value="1"/>
        </element>
        <element id="Extension.extension:supportingInformation.value[x].code">
            <path value="Extension.extension.value[x].code"/>
            <min value="1"/>
        </element>
        <element id="Extension.extension:timeFrame">
            <path value="Extension.extension"/>
            <sliceName value="timeFrame"/>
            <short value="When and for how long will the data be available?"/>
            <definition value="Indication when the data and, if applicable, supporting documents will become available and for how long."/>
            <min value="0"/>
            <max value="1"/>
            <mapping>
                <identity value="NFDI4Health"/>
                <map value="1.17.35.3 Resource.studyDesign.dataSharingPlan.timeFrame"/>
            </mapping>
        </element>
        <element id="Extension.extension:timeFrame.extension">
            <path value="Extension.extension.extension"/>
            <max value="0"/>
        </element>
        <element id="Extension.extension:timeFrame.url">
            <path value="Extension.extension.url"/>
            <fixedUri value="timeFrame"/>
        </element>
        <element id="Extension.extension:timeFrame.value[x]">
            <path value="Extension.extension.value[x]"/>
            <type>
                <code value="string"/>
            </type>
        </element>
        <element id="Extension.extension:accessCriteria">
            <path value="Extension.extension"/>
            <sliceName value="accessCriteria"/>
            <short value="Criteria for the data access"/>
            <definition value="Indication by what access criteria data will be shared, including: a) with whom, b) for what types of analyses, and c) by what mechanism."/>
            <comment value="E.g., with whom, for what types of analyses and by what mechanism the data will be shared."/>
            <min value="0"/>
            <max value="1"/>
            <mapping>
                <identity value="NFDI4Health"/>
                <map value="1.17.35.4 Resource.studyDesign.dataSharingPlan.accessCriteria"/>
            </mapping>
        </element>
        <element id="Extension.extension:accessCriteria.extension">
            <path value="Extension.extension.extension"/>
            <max value="0"/>
        </element>
        <element id="Extension.extension:accessCriteria.url">
            <path value="Extension.extension.url"/>
            <fixedUri value="accessCriteria"/>
        </element>
        <element id="Extension.extension:accessCriteria.value[x]">
            <path value="Extension.extension.value[x]"/>
            <type>
                <code value="string"/>
            </type>
        </element>
        <element id="Extension.extension:description">
            <path value="Extension.extension"/>
            <sliceName value="description"/>
            <short value="Additional information about data sharing"/>
            <definition value="Additional descriptive information providing more details about the data sharing, e.g. indication what data in particular will be shared or why the data will not be shared or why it is not yet decided."/>
            <comment value="E.g., indication what data in particular will be shared or why the data will not be shared or why it is not yet decided"/>
            <min value="0"/>
            <max value="1"/>
            <mapping>
                <identity value="NFDI4Health"/>
                <map value="1.17.35.5 Resource.studyDesign.dataSharingPlan.description"/>
            </mapping>
        </element>
        <element id="Extension.extension:description.extension">
            <path value="Extension.extension.extension"/>
            <max value="0"/>
        </element>
        <element id="Extension.extension:description.url">
            <path value="Extension.extension.url"/>
            <fixedUri value="description"/>
        </element>
        <element id="Extension.extension:description.value[x]">
            <path value="Extension.extension.value[x]"/>
            <type>
                <code value="string"/>
            </type>
        </element>
        <element id="Extension.extension:datashield">
            <path value="Extension.extension"/>
            <sliceName value="datashield"/>
            <short value="Is the DataSHIELD/Opal infrastructure available?"/>
            <definition value="Indication, whether the DataSHIELD/Opal infrastructure is available."/>
            <min value="0"/>
            <max value="1"/>
            <mapping>
                <identity value="NFDI4Health"/>
                <map value="1.17.35.6 Resource.studyDesign.dataSharingPlan.datashield"/>
            </mapping>
        </element>
        <element id="Extension.extension:datashield.extension">
            <path value="Extension.extension.extension"/>
            <max value="0"/>
        </element>
        <element id="Extension.extension:datashield.url">
            <path value="Extension.extension.url"/>
            <fixedUri value="datashield"/>
        </element>
        <element id="Extension.extension:datashield.value[x]">
            <path value="Extension.extension.value[x]"/>
            <min value="1"/>
            <type>
                <code value="Coding"/>
            </type>
            <binding>
                <strength value="required"/>
                <description value="Value set defining codes to specify if the DataSHIELD/Opal infrastructure is available."/>
                <valueSet value="https://www.nfdi4health.de/fhir/metadataschema/ValueSet/nfdi4health-vs-mds-study-data-sharing-plan-ds-snomedct-umls"/>
            </binding>
        </element>
        <element id="Extension.extension:datashield.value[x].system">
            <path value="Extension.extension.value[x].system"/>
            <min value="1"/>
        </element>
        <element id="Extension.extension:datashield.value[x].code">
            <path value="Extension.extension.value[x].code"/>
            <min value="1"/>
        </element>
        <element id="Extension.extension:url">
            <path value="Extension.extension"/>
            <sliceName value="url"/>
            <short value="Web page with additional information about data sharing"/>
            <definition value="If existing, a link to the web page where additional information about data sharing can be found."/>
            <min value="0"/>
            <max value="1"/>
            <mapping>
                <identity value="NFDI4Health"/>
                <map value="1.17.35.7 Resource.studyDesign.dataSharingPlan.url"/>
            </mapping>
        </element>
        <element id="Extension.extension:url.extension">
            <path value="Extension.extension.extension"/>
            <max value="0"/>
        </element>
        <element id="Extension.extension:url.url">
            <path value="Extension.extension.url"/>
            <fixedUri value="url"/>
        </element>
        <element id="Extension.extension:url.value[x]">
            <path value="Extension.extension.value[x]"/>
            <type>
                <code value="url"/>
            </type>
        </element>
        <element id="Extension.url">
            <path value="Extension.url"/>
            <fixedUri value="https://www.nfdi4health.de/fhir/metadataschema/StructureDefinition/nfdi4health-ex-mds-study-data-sharing-plan"/>
        </element>
        <element id="Extension.value[x]">
            <path value="Extension.value[x]"/>
            <max value="0"/>
        </element>
    </differential>
</StructureDefinition>