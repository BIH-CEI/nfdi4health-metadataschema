<?xml version="1.0" encoding="UTF-8"?>
<StructureDefinition xmlns="http://hl7.org/fhir">
    <id value="nfdi4health-ex-mds-study-data-source"/>
    <url value="https://www.nfdi4health.de/fhir/metadataschema/StructureDefinition/nfdi4health-ex-mds-study-data-source"/>
    <version value="0.9"/>
    <name value="NFDI4Health_EX_MDS_Study_Data_Source"/>
    <title value="NFDI4Health EX MDS Study Data Source"/>
    <status value="draft"/>
    <publisher value="NFDI4Health"/>
    <contact>
        <telecom>
            <system value="url"/>
            <value value="https://www.nfdi4health.de"/>
        </telecom>
    </contact>
    <description value="Extension informing about data sources from which study data are generated or extracted."/>
    <fhirVersion value="4.0.1"/>
    <mapping>
        <identity value="rim"/>
        <uri value="http://hl7.org/v3"/>
        <name value="RIM Mapping"/>
    </mapping>
    <mapping>
        <identity value="NFDI4Health"/>
        <name value="NFDI4Health to FHIR Mapping"/>
    </mapping>
    <kind value="complex-type"/>
    <abstract value="false"/>
    <context>
        <type value="element"/>
        <expression value="ResearchStudy"/>
    </context>
    <type value="Extension"/>
    <baseDefinition value="http://hl7.org/fhir/StructureDefinition/Extension"/>
    <derivation value="constraint"/>
    <differential>
        <element id="Extension">
            <path value="Extension"/>
            <short value="Data sources from which study data are generated or extracted."/>
            <definition value="Group of items providing information about data sources from which study data are generated or extracted."/>
            <max value="1"/>
            <mapping>
                <identity value="NFDI4Health"/>
                <map value="1.17.21 Resource.studyDesign.dataSource"/>
            </mapping>
        </element>
        <element id="Extension.extension:general">
            <path value="Extension.extension"/>
            <sliceName value="general"/>
            <short value="Data sources for the study (e.g. biosamples, registries, questionnaires, etc.)"/>
            <definition value="Different types of data sources from which study data are generated or extracted."/>
            <comment value="Select all that apply."/>
            <min value="0"/>
            <max value="*"/>
            <mapping>
                <identity value="NFDI4Health"/>
                <map value="1.17.21.1 Resource.studyDesign.dataSource.general"/>
            </mapping>
        </element>
        <element id="Extension.extension:general.extension">
            <path value="Extension.extension.extension"/>
            <max value="0"/>
        </element>
        <element id="Extension.extension:general.url">
            <path value="Extension.extension.url"/>
            <fixedUri value="general"/>
        </element>
        <element id="Extension.extension:general.value[x]">
            <path value="Extension.extension.value[x]"/>
            <min value="1"/>
            <type>
                <code value="Coding"/>
            </type>
            <binding>
                <strength value="required"/>
                <description value="Value set defining codes to specify the general study data sources."/>
                <valueSet value="https://www.nfdi4health.de/fhir/metadataschema/ValueSet/nfdi4health-vs-mds-study-data-sources-general-umls-local"/>
            </binding>
        </element>
        <element id="Extension.extension:general.value[x].system">
            <path value="Extension.extension.value[x].system"/>
            <min value="1"/>
        </element>
        <element id="Extension.extension:general.value[x].code">
            <path value="Extension.extension.value[x].code"/>
            <min value="1"/>
        </element>
        <element id="Extension.extension:biosamples">
            <path value="Extension.extension"/>
            <sliceName value="biosamples"/>
            <short value="Biosamples collected in the study"/>
            <definition value="Specification of biosamples collected in the study."/>
            <min value="0"/>
            <max value="*"/>
            <mapping>
                <identity value="NFDI4Health"/>
                <map value="1.17.21.2 Resource.studyDesign.dataSource.biosamples"/>
            </mapping>
        </element>
        <element id="Extension.extension:biosamples.extension">
            <path value="Extension.extension.extension"/>
            <max value="0"/>
        </element>
        <element id="Extension.extension:biosamples.url">
            <path value="Extension.extension.url"/>
            <fixedUri value="biosamples"/>
        </element>
        <element id="Extension.extension:biosamples.value[x]">
            <path value="Extension.extension.value[x]"/>
            <min value="1"/>
            <type>
                <code value="Coding"/>
            </type>
            <binding>
                <strength value="required"/>
                <description value="Value set defining codes to specify a biosample data source."/>
                <valueSet value="https://www.nfdi4health.de/fhir/metadataschema/ValueSet/nfdi4health-vs-mds-study-ds-biosamples-snomedct-nci-umls"/>
            </binding>
        </element>
        <element id="Extension.extension:biosamples.value[x].system">
            <path value="Extension.extension.value[x].system"/>
            <min value="1"/>
        </element>
        <element id="Extension.extension:biosamples.value[x].code">
            <path value="Extension.extension.value[x].code"/>
            <min value="1"/>
        </element>
        <element id="Extension.extension:imaging">
            <path value="Extension.extension"/>
            <sliceName value="imaging"/>
            <short value="Imaging data collected in the study"/>
            <definition value="Specification of imaging data collected in the study."/>
            <min value="0"/>
            <max value="*"/>
            <binding>
                <description value="Value set defining codes to specify an imaging data source."/>
            </binding>
            <mapping>
                <identity value="NFDI4Health"/>
                <map value="1.17.21.3 Resource.studyDesign.dataSource.imaging"/>
            </mapping>
        </element>
        <element id="Extension.extension:imaging.extension">
            <path value="Extension.extension.extension"/>
            <max value="0"/>
        </element>
        <element id="Extension.extension:imaging.url">
            <path value="Extension.extension.url"/>
            <fixedUri value="imaging"/>
        </element>
        <element id="Extension.extension:imaging.value[x]">
            <path value="Extension.extension.value[x]"/>
            <min value="1"/>
            <type>
                <code value="Coding"/>
            </type>
            <binding>
                <strength value="required"/>
                <valueSet value="https://www.nfdi4health.de/fhir/metadataschema/ValueSet/nfdi4health-vs-mds-study-data-sources-imaging-nci"/>
            </binding>
        </element>
        <element id="Extension.extension:imaging.value[x].system">
            <path value="Extension.extension.value[x].system"/>
            <min value="1"/>
        </element>
        <element id="Extension.extension:imaging.value[x].code">
            <path value="Extension.extension.value[x].code"/>
            <min value="1"/>
        </element>
        <element id="Extension.extension:omics">
            <path value="Extension.extension"/>
            <sliceName value="omics"/>
            <short value="Omics technology used in the study"/>
            <definition value="Specification of omics technology applied in the study."/>
            <min value="0"/>
            <max value="*"/>
            <binding>
                <description value="NFDI4Health VS MDS Study Data Sources Omics [NCI, UMLS]"/>
            </binding>
            <mapping>
                <identity value="NFDI4Health"/>
                <map value="1.17.21.4 Resource.studyDesign.dataSource.omics"/>
            </mapping>
        </element>
        <element id="Extension.extension:omics.extension">
            <path value="Extension.extension.extension"/>
            <max value="0"/>
        </element>
        <element id="Extension.extension:omics.url">
            <path value="Extension.extension.url"/>
            <fixedUri value="omics"/>
        </element>
        <element id="Extension.extension:omics.value[x]">
            <path value="Extension.extension.value[x]"/>
            <min value="1"/>
            <type>
                <code value="Coding"/>
            </type>
            <binding>
                <strength value="required"/>
                <valueSet value="https://www.nfdi4health.de/fhir/metadataschema/ValueSet/nfdi4health-vs-mds-study-data-sources-omics-nci-umls"/>
            </binding>
        </element>
        <element id="Extension.extension:omics.value[x].system">
            <path value="Extension.extension.value[x].system"/>
            <min value="1"/>
        </element>
        <element id="Extension.extension:omics.value[x].code">
            <path value="Extension.extension.value[x].code"/>
            <min value="1"/>
        </element>
        <element id="Extension.extension:description">
            <path value="Extension.extension"/>
            <sliceName value="description"/>
            <short value="Additional information about data sources"/>
            <definition value="If needed, additional descriptive information about study data sources, e.g. indication of the data source(s) not listed in the property 'Data sources for the study' or more detailed description of the selected data sources."/>
            <min value="0"/>
            <max value="1"/>
            <mapping>
                <identity value="NFDI4Health"/>
                <map value="1.17.21.5 Resource.studyDesign.dataSource.description"/>
            </mapping>
        </element>
        <element id="Extension.extension:description.extension">
            <path value="Extension.extension.extension"/>
            <max value="0"/>
        </element>
        <element id="Extension.extension:description.url">
            <path value="Extension.extension.url"/>
            <fixedUri value="description"/>
        </element>
        <element id="Extension.extension:description.value[x]">
            <path value="Extension.extension.value[x]"/>
            <type>
                <code value="string"/>
            </type>
        </element>
        <element id="Extension.url">
            <path value="Extension.url"/>
            <fixedUri value="https://www.nfdi4health.de/fhir/metadataschema/StructureDefinition/nfdi4health-ex-mds-study-data-source"/>
        </element>
        <element id="Extension.value[x]">
            <path value="Extension.value[x]"/>
            <max value="0"/>
        </element>
    </differential>
</StructureDefinition>